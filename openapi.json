{
  "openapi": "3.1.0",
  "info": {
    "title": "Control Inventario API",
    "version": "1.0.0",
    "description": ""
  },
  "paths": {
    "/api/tienda/listar/": {
      "get": {
        "operationId": "tienda_api_listar_tiendas",
        "summary": "Listar Tiendas",
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/TiendaSchema"
                  },
                  "title": "Response",
                  "type": "array"
                }
              }
            }
          }
        },
        "description": "Lista todas las tiendas disponibles.",
        "tags": [
          "Tiendas"
        ]
      }
    },
    "/api/tienda/crear/": {
      "post": {
        "operationId": "tienda_api_crear_tienda",
        "summary": "Crear Tienda",
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TiendaSchema"
                }
              }
            }
          }
        },
        "description": "Crea una nueva tienda.",
        "tags": [
          "Tiendas"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TiendaInSchema"
              }
            }
          },
          "required": true
        }
      }
    },
    "/api/tienda/actualizar/{tienda_id}/": {
      "patch": {
        "operationId": "tienda_api_actualizar_tienda",
        "summary": "Actualizar Tienda",
        "parameters": [
          {
            "in": "path",
            "name": "tienda_id",
            "schema": {
              "title": "Tienda Id",
              "type": "integer"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TiendaSchema"
                }
              }
            }
          }
        },
        "description": "Actualiza una tienda existente.",
        "tags": [
          "Tiendas"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TiendaInSchema"
              }
            }
          },
          "required": true
        }
      }
    },
    "/api/tienda/eliminar/{tienda_id}/": {
      "delete": {
        "operationId": "tienda_api_eliminar_tienda",
        "summary": "Eliminar Tienda",
        "parameters": [
          {
            "in": "path",
            "name": "tienda_id",
            "schema": {
              "title": "Tienda Id",
              "type": "integer"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        },
        "description": "Elimina una tienda existente.",
        "tags": [
          "Tiendas"
        ]
      }
    },
    "/api/compra/rango/": {
      "get": {
        "operationId": "compra_api_compras_por_rango",
        "summary": "Compras Por Rango",
        "parameters": [
          {
            "in": "query",
            "name": "fecha_inicio",
            "schema": {
              "anyOf": [
                {
                  "format": "date",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Fecha Inicio"
            },
            "required": false
          },
          {
            "in": "query",
            "name": "fecha_fin",
            "schema": {
              "anyOf": [
                {
                  "format": "date",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Fecha Fin"
            },
            "required": false
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "default": 3,
              "title": "Limit",
              "type": "integer"
            },
            "required": false
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/CompraWithDetailsSchema"
                  },
                  "title": "Response",
                  "type": "array"
                }
              }
            }
          }
        },
        "description": "Devuelve hasta `limit` compras con detalles.\n\n- Si no se pasa `fecha_inicio` ni `fecha_fin`, devuelve las últimas `limit` compras.\n- Si se pasa un rango (`fecha_inicio` y `fecha_fin`), devuelve las últimas `limit` compras dentro de ese rango.",
        "tags": [
          "Compras"
        ]
      }
    },
    "/api/compra/crear/": {
      "post": {
        "operationId": "compra_api_crear_compra",
        "summary": "Crear Compra",
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CompraWithDetailsSchema"
                }
              }
            }
          }
        },
        "description": "Crea una nueva compra y genera un detalle por cada producto del proveedor con valores en 0.",
        "tags": [
          "Compras"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CompraInSchema"
              }
            }
          },
          "required": true
        }
      }
    },
    "/api/compra/detalle/editar/{detalle_id}/": {
      "patch": {
        "operationId": "compra_api_editar_detalle",
        "summary": "Editar Detalle",
        "parameters": [
          {
            "in": "path",
            "name": "detalle_id",
            "schema": {
              "title": "Detalle Id",
              "type": "integer"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DetalleCompraSchema"
                }
              }
            }
          }
        },
        "description": "Edita un detalle de compra existente.",
        "tags": [
          "Compras"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DetalleCompraUpdateSchema"
              }
            }
          },
          "required": true
        }
      }
    },
    "/api/compra/eliminar/{compra_id}/": {
      "delete": {
        "operationId": "compra_api_eliminar_compra",
        "summary": "Eliminar Compra",
        "parameters": [
          {
            "in": "path",
            "name": "compra_id",
            "schema": {
              "title": "Compra Id",
              "type": "integer"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        },
        "description": "Elimina una compra (y sus detalles por cascade).",
        "tags": [
          "Compras"
        ]
      }
    },
    "/api/proveedor/listar/{tienda_id}/": {
      "get": {
        "operationId": "proveedor_api_listar_proveedores",
        "summary": "Listar Proveedores",
        "parameters": [
          {
            "in": "path",
            "name": "tienda_id",
            "schema": {
              "title": "Tienda Id",
              "type": "integer"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ProveedorSchema"
                  },
                  "title": "Response",
                  "type": "array"
                }
              }
            }
          }
        },
        "description": "Lista todos los proveedores de una tienda específica.",
        "tags": [
          "Proveedores"
        ]
      }
    },
    "/api/proveedor/crear/": {
      "post": {
        "operationId": "proveedor_api_crear_proveedor",
        "summary": "Crear Proveedor",
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProveedorSchema"
                }
              }
            }
          }
        },
        "description": "Crea un nuevo proveedor asociado a una tienda.",
        "tags": [
          "Proveedores"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProveedorInSchema"
              }
            }
          },
          "required": true
        }
      }
    },
    "/api/proveedor/actualizar/{proveedor_id}/": {
      "patch": {
        "operationId": "proveedor_api_actualizar_proveedor",
        "summary": "Actualizar Proveedor",
        "parameters": [
          {
            "in": "path",
            "name": "proveedor_id",
            "schema": {
              "title": "Proveedor Id",
              "type": "integer"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProveedorSchema"
                }
              }
            }
          }
        },
        "description": "Actualiza un proveedor existente.",
        "tags": [
          "Proveedores"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProveedorUpdateSchema"
              }
            }
          },
          "required": true
        }
      }
    },
    "/api/proveedor/eliminar/{proveedor_id}/": {
      "delete": {
        "operationId": "proveedor_api_eliminar_proveedor",
        "summary": "Eliminar Proveedor",
        "parameters": [
          {
            "in": "path",
            "name": "proveedor_id",
            "schema": {
              "title": "Proveedor Id",
              "type": "integer"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        },
        "description": "Elimina un proveedor existente.",
        "tags": [
          "Proveedores"
        ]
      }
    },
    "/api/producto/listar/{proveedor_id}/": {
      "get": {
        "operationId": "producto_api_listar_productos",
        "summary": "Listar Productos",
        "parameters": [
          {
            "in": "path",
            "name": "proveedor_id",
            "schema": {
              "title": "Proveedor Id",
              "type": "integer"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ProductoSchema"
                  },
                  "title": "Response",
                  "type": "array"
                }
              }
            }
          }
        },
        "description": "Lista todos los productos de un proveedor específico.",
        "tags": [
          "Productos"
        ]
      }
    },
    "/api/producto/crear/": {
      "post": {
        "operationId": "producto_api_crear_producto",
        "summary": "Crear Producto",
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductoSchema"
                }
              }
            }
          }
        },
        "description": "Crea un nuevo producto asociado a un proveedor.",
        "tags": [
          "Productos"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductoInSchema"
              }
            }
          },
          "required": true
        }
      }
    },
    "/api/producto/actualizar/{producto_id}/": {
      "patch": {
        "operationId": "producto_api_actualizar_producto",
        "summary": "Actualizar Producto",
        "parameters": [
          {
            "in": "path",
            "name": "producto_id",
            "schema": {
              "title": "Producto Id",
              "type": "integer"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductoSchema"
                }
              }
            }
          }
        },
        "description": "Actualiza un producto existente.",
        "tags": [
          "Productos"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductoUpdateSchema"
              }
            }
          },
          "required": true
        }
      }
    },
    "/api/producto/eliminar/{producto_id}/": {
      "delete": {
        "operationId": "producto_api_eliminar_producto",
        "summary": "Eliminar Producto",
        "parameters": [
          {
            "in": "path",
            "name": "producto_id",
            "schema": {
              "title": "Producto Id",
              "type": "integer"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        },
        "description": "Elimina un producto existente.",
        "tags": [
          "Productos"
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "TiendaSchema": {
        "properties": {
          "id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "ID"
          },
          "nombre": {
            "maxLength": 100,
            "title": "Nombre",
            "type": "string"
          }
        },
        "required": [
          "nombre"
        ],
        "title": "TiendaSchema",
        "type": "object"
      },
      "TiendaInSchema": {
        "properties": {
          "nombre": {
            "title": "Nombre",
            "type": "string"
          }
        },
        "required": [
          "nombre"
        ],
        "title": "TiendaInSchema",
        "type": "object"
      },
      "CompraWithDetailsSchema": {
        "properties": {
          "id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "ID"
          },
          "proveedor": {
            "title": "Proveedor",
            "type": "integer"
          },
          "fecha_compra": {
            "format": "date",
            "title": "Fecha Compra",
            "type": "string"
          },
          "detalles": {
            "items": {
              "$ref": "#/components/schemas/DetalleCompraSchema"
            },
            "title": "Detalles",
            "type": "array"
          }
        },
        "required": [
          "proveedor",
          "detalles"
        ],
        "title": "CompraWithDetailsSchema",
        "type": "object"
      },
      "DetalleCompraSchema": {
        "properties": {
          "producto_nombre": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Producto Nombre"
          },
          "id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "ID"
          },
          "compra": {
            "title": "Compra",
            "type": "integer"
          },
          "producto": {
            "title": "Producto",
            "type": "integer"
          },
          "cantidad": {
            "title": "Cantidad",
            "type": "integer"
          },
          "inventario_anterior": {
            "title": "Inventario Anterior",
            "type": "integer"
          }
        },
        "required": [
          "compra",
          "producto",
          "cantidad",
          "inventario_anterior"
        ],
        "title": "DetalleCompraSchema",
        "type": "object"
      },
      "CompraInSchema": {
        "properties": {
          "proveedor_id": {
            "title": "Proveedor Id",
            "type": "integer"
          },
          "fecha_compra": {
            "format": "date",
            "title": "Fecha Compra",
            "type": "string"
          }
        },
        "required": [
          "proveedor_id",
          "fecha_compra"
        ],
        "title": "CompraInSchema",
        "type": "object"
      },
      "DetalleCompraUpdateSchema": {
        "properties": {
          "cantidad": {
            "title": "Cantidad",
            "type": "integer"
          },
          "inventario_anterior": {
            "title": "Inventario Anterior",
            "type": "integer"
          }
        },
        "required": [
          "cantidad",
          "inventario_anterior"
        ],
        "title": "DetalleCompraUpdateSchema",
        "type": "object"
      },
      "ProveedorSchema": {
        "properties": {
          "id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "ID"
          },
          "nombre": {
            "maxLength": 100,
            "title": "Nombre",
            "type": "string"
          },
          "tienda": {
            "title": "Tienda",
            "type": "integer"
          }
        },
        "required": [
          "nombre",
          "tienda"
        ],
        "title": "ProveedorSchema",
        "type": "object"
      },
      "ProveedorInSchema": {
        "properties": {
          "nombre": {
            "title": "Nombre",
            "type": "string"
          },
          "tienda_id": {
            "title": "Tienda Id",
            "type": "integer"
          }
        },
        "required": [
          "nombre",
          "tienda_id"
        ],
        "title": "ProveedorInSchema",
        "type": "object"
      },
      "ProveedorUpdateSchema": {
        "properties": {
          "nombre": {
            "title": "Nombre",
            "type": "string"
          }
        },
        "required": [
          "nombre"
        ],
        "title": "ProveedorUpdateSchema",
        "type": "object"
      },
      "ProductoSchema": {
        "properties": {
          "id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "ID"
          },
          "nombre": {
            "maxLength": 100,
            "title": "Nombre",
            "type": "string"
          },
          "proveedor": {
            "title": "Proveedor",
            "type": "integer"
          }
        },
        "required": [
          "nombre",
          "proveedor"
        ],
        "title": "ProductoSchema",
        "type": "object"
      },
      "ProductoInSchema": {
        "properties": {
          "nombre": {
            "title": "Nombre",
            "type": "string"
          },
          "proveedor_id": {
            "title": "Proveedor Id",
            "type": "integer"
          }
        },
        "required": [
          "nombre",
          "proveedor_id"
        ],
        "title": "ProductoInSchema",
        "type": "object"
      },
      "ProductoUpdateSchema": {
        "properties": {
          "nombre": {
            "title": "Nombre",
            "type": "string"
          }
        },
        "required": [
          "nombre"
        ],
        "title": "ProductoUpdateSchema",
        "type": "object"
      }
    }
  },
  "servers": []
}